<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    {% import '/macros.html' as macros %}
    {{ macros.common_source() }}
</head>
<body>
<div id="cluster_toolbar">
    <input type="hidden" id="cluster_id" name="cluster_id" value="{{ cluster_id }}">
</div>
<table id="topic_dg" method="post" style="width:100%;"
       fit="true" toolbar="#cluster_toolbar" singleSelect="True" fitColumns="true" rownumbers="true"
       sortName="name">
    <thead>
    <tr>
        <th halign="center" field="topic_name" width="40%" sortable="true">topic名字</th>
        <th halign="center" field="partition_num" width="8%">分区数</th>
        <th halign="center" field="rep_num" width="8%">副本数</th>
        <th halign="center" field="broker_num" width="8%">Broker数</th>
        <th halign="center" field="group_num" width="8%">Group数</th>
        <th halign="center" field="product_num" width="12%">生产消息数/s</th>
        <th halign="center" field="id" formatter="formatterButton" width="8%">操作</th>
    </tr>
    </thead>
</table>

<script type="text/javascript" charset="utf-8">
    $(function () {
        $('#topic_dg').datagrid({
            queryParams: {cluster_id: $('#cluster_id').val()},
            url: "/kafka/topic/list"
        }).datagrid('enableFilter');
    });

    function formatterButton(value, rowData, rowIndex) {
        var str = '<a href="#" onclick="edit_cluster(' + rowIndex + ')">编辑</a>';
        str += '&nbsp;|&nbsp;<a href="#"  onclick="destroy_cluster(' + rowData.id + ')">删除</a>';
        return str;
    }
</script>
</body>
</html>